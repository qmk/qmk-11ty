<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Flashing Your Keyboard</title>
    <link rel="icon" type="image/png" href="gitbook/images/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="description" content="Description">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta property="og:title" content="QMK Firmware Docs">
    <meta property="og:type" content="website">
    <meta property="og:description" content="The full documentation of the open-source firmware">
    <meta property="og:image" content="https://i.imgur.com/svjvIrw.jpg">
    <meta property="og:url" content="https://docs.qmk.fm">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/cirrus-ui">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

    <style>
      .doc-grid {
        display: grid;
        grid-template-columns: 2fr 7fr;
      }
      .doc-grid-internal {
        display: grid;
        grid-template-rows: 100px 5fr;
      }
      .relative {
        position: relative;
        overflow: auto;
      }
      .fixed {
        width: 18vw;
      }
      .background {
        padding: 1rem;
        margin: 1rem;
      }
      main {
        margin-top: 2.5em;
      }
      .content: {
        justify-content: start;
        align-items: start;
      }
    </style>
  </head>
  <body>
    <div class="header header-fixed u-unselectable header-animated">
  <div class="header-brand">
    <div class="nav-item no-hover">
      <a>
        <h6 class="title">QMK Docs</h6>
      </a>
    </div>
    <div class="nav-item nav-btn" id="header-btn">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <div class="header-nav" id="header-menu">
    <div class="nav-left">
      <div class="nav-item text-center">
        <a href="#">
          <span class="icon">
            <i class="fab fa-wrapper fa-github" aria-hidden="true"></i>
          </span>
        </a>
      </div>
      <div class="nav-item text-center">
        <a href="#">
          <span class="icon">
            <i class="fab fa-wrapper fa-slack" aria-hidden="true"></i>
          </span>
        </a>
      </div>
      <div class="nav-item text-center">
        <a href="#">
          <span class="icon">
            <i class="fab fa-wrapper fa-twitter" aria-hidden="true"></i>
          </span>
        </a>
      </div>
      <div class="nav-item has-sub toggle-hover" id="dropdown">
        <a class="nav-dropdown-link">Animated</a>
        <ul class="dropdown-menu dropdown-animated" role="menu">
          <li role="menu-item">
            <a href="#">First Item</a>
          </li>
          <li role="menu-item">
            <a href="#">Second Item</a>
          </li>
          <li role="menu-item">
            <a href="#">Third Item</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="nav-right">
      <div class="nav-item active">
        <a href="#">Active</a>
      </div>
      <div class="nav-item">
        <a href="#">Link 1</a>
      </div>
      <div class="nav-item has-sub" id="dropdown">
        <a class="nav-dropdown-link">Click Me</a>
        <ul class="dropdown-menu" role="menu">
          <li role="menu-item">
            <a href="#">First Item</a>
          </li>
          <li role="menu-item">
            <a href="#">Second Item</a>
          </li>
          <li role="menu-item">
            <a href="#">Third Item</a>
          </li>
          <li class="dropdown-menu-divider"></li>
          <li role="menu-item">
            <a href="#">Fourth Item</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
    <main class="frame">
      <div class="doc-grid">
        <aside class="relative frame__header background">
          <div class="nested-list fixed" style="overflow: hidden;">
            <h5>Index</h5>
            <ul><li><a href="/qmk-11ty/">root</a><ul><li><a href="/qmk-11ty/README/">Readme</a></li>
<li><a href="/qmk-11ty/tutorial/">Tutorial</a><ul><li><a href="/qmk-11ty/tutorial/newbs/">Introduction</a></li>
<li><a href="/qmk-11ty/tutorial/newbs_getting_started/">Setup</a></li>
<li><a href="/qmk-11ty/tutorial/newbs_building_firmware/">Building Your First Firmware</a></li>
<li><a href="/qmk-11ty/tutorial/newbs_flashing/">Flashing Your Keyboard</a></li>
<li><a href="/qmk-11ty/tutorial/support/">Getting Help/Support</a></li>
<li><a href="/qmk-11ty/tutorial/newbs_learn_more_resources/">Learning Resources</a></li>
<li><a href="/qmk-11ty/tutorial/syllabus/">QMK Syllabus</a></li></ul></li>
<li><a href="/qmk-11ty/faqs/">FAQs</a><ul><li><a href="/qmk-11ty/faqs/frequently-asked-questions/">Frequently Asked Questions</a></li>
<li><a href="/qmk-11ty/faqs/build-compile-qmk/">Build/Compile QMK</a></li>
<li><a href="/qmk-11ty/faqs/troubleshooting-qmk/">Troubleshooting QMK</a></li>
<li><a href="/qmk-11ty/faqs/debugging-faq/">Debugging QMK</a></li>
<li><a href="/qmk-11ty/faqs/keymap-faq/">Keymap FAQ</a></li>
<li><a href="/qmk-11ty/faqs/squeezing-the-most-out-of-avr/">Squeezing Space from AVR</a></li>
<li><a href="/qmk-11ty/faqs/glossary-of-qmk-terms/">Glossary</a></li></ul></li></ul></li></ul>
          </div>
        </aside>
        <div class="doc-grid-internal frame__body background">
          <h1>Flashing Your Keyboard</h1>
          <aside class="nested-list content">
            <h4>Contents</h4>
            
            <nav class="toc" >
        <ol><li><a href="#put-your-keyboard-into-dfu-(bootloader)-mode">Put Your Keyboard into DFU (Bootloader) Mode</a></li><li><a href="#flashing-your-keyboard-with-qmk-toolbox">Flashing Your Keyboard with QMK Toolbox</a><ol><li><a href="#load-the-file-into-qmk-toolbox">Load the File into QMK Toolbox</a><ol><li><a href="#**-windows-**">** Windows **</a></li><li><a href="#**-macos-**">** macOS **</a></li></ol></li><li><a href="#flash-your-keyboard">Flash Your Keyboard</a></li></ol></li><li><a href="#flash-your-keyboard-from-the-command-line">Flash your Keyboard from the Command Line</a></li><li><a href="#test-it-out!">Test It Out!</a></li></ol>
      </nav>
          </aside>
          <article><p>Now that you've built a custom firmware file you'll want to flash your keyboard.</p>
<h2 id="put-your-keyboard-into-dfu-(bootloader)-mode" tabindex="-1">Put Your Keyboard into DFU (Bootloader) Mode</h2>
<p>In order to flash your custom firmware you must first put your keyboard into a special flashing mode. While it is in this mode you will not be able to type or otherwise use your keyboard. It is very important that you do not unplug the keyboard or otherwise interrupt the flashing process while the firmware is being written.</p>
<p>Different keyboards have different ways to enter this special mode. If your PCB currently runs QMK, TMK, or PS2AVRGB (Bootmapper Client) and you have not been given specific instructions, try the following, in order:</p>
<ul>
<li>Hold down both shift keys and press <code>Pause</code></li>
<li>Hold down both shift keys and press <code>B</code></li>
<li>Unplug your keyboard, hold down the Spacebar and <code>B</code> at the same time, plug in your keyboard and wait a second before releasing the keys</li>
<li>Unplug your keyboard, hold down the top or bottom left key (usually Escape or Left Control) and plug in your keyboard</li>
<li>Press the physical <code>RESET</code> button, usually located on the underside of the PCB</li>
<li>Locate header pins on the PCB labeled <code>RESET</code> and <code>GND</code>, and short them together while plugging your PCB in</li>
</ul>
<p>If you've attempted all of the above to no avail, and the main chip on the board says <code>STM32</code> on it, this may be a bit more complicated. Generally your best bet is to ask on <a href="https://discord.gg/Uq7gcHh">Discord</a> for assistance. It's likely some photos of the board will be asked for -- if you can get them ready beforehand it'll help move things along!</p>
<p>Otherwise, you should see a message in yellow, similar to this in QMK Toolbox:</p>
<pre><code>*** DFU device connected: Atmel Corp. ATmega32U4 (03EB:2FF4:0000)
</code></pre>
<p>and this bootloader device will also be present in Device Manager, System Information.app, or <code>lsusb</code>.</p>
<h2 id="flashing-your-keyboard-with-qmk-toolbox" tabindex="-1">Flashing Your Keyboard with QMK Toolbox</h2>
<p>The simplest way to flash your keyboard will be with the <a href="https://github.com/qmk/qmk_toolbox/releases">QMK Toolbox</a>.</p>
<p>However, the Toolbox is currently only available for Windows and macOS. If you're using Linux (or just wish to flash the firmware from the command line), skip to the <a href="#flash-your-keyboard-from-the-command-line">Flash your Keyboard from the Command Line</a> section.</p>
<h3 id="load-the-file-into-qmk-toolbox" tabindex="-1">Load the File into QMK Toolbox</h3>
<p>Begin by opening the QMK Toolbox application. You'll want to locate the firmware file in Finder or Explorer. Your keyboard firmware may be in one of two formats- <code>.hex</code> or <code>.bin</code>. QMK tries to copy the appropriate one for your keyboard into the root <code>qmk_firmware</code> directory.</p>
<p>If you are on Windows or macOS, there are commands you can use to easily open the current folder in Explorer or Finder.</p>
<p>&lt;!-- tabs:start --&gt;</p>
<h4 id="**-windows-**" tabindex="-1">** Windows **</h4>
<pre><code>start .
</code></pre>
<h4 id="**-macos-**" tabindex="-1">** macOS **</h4>
<pre><code>open .
</code></pre>
<p>&lt;!-- tabs:end --&gt;</p>
<p>The firmware file always follows this naming format:</p>
<pre><code>&lt;keyboard_name&gt;_&lt;keymap_name&gt;.{bin,hex}
</code></pre>
<p>For example, the <code>planck/rev5</code> with a <code>default</code> keymap will have this filename:</p>
<pre><code>planck_rev5_default.hex
</code></pre>
<p>Once you have located your firmware file, drag it into the &quot;Local file&quot; box in QMK Toolbox, or click &quot;Open&quot; and navigate to where your firmware file is stored.</p>
<h3 id="flash-your-keyboard" tabindex="-1">Flash Your Keyboard</h3>
<p>Click the <code>Flash</code> button in QMK Toolbox. You will see output similar to the following:</p>
<pre><code>*** DFU device connected: Atmel Corp. ATmega32U4 (03EB:2FF4:0000)
*** Attempting to flash, please don't remove device
&gt;&gt;&gt; dfu-programmer.exe atmega32u4 erase --force
    Erasing flash...  Success
    Checking memory from 0x0 to 0x6FFF...  Empty.
&gt;&gt;&gt; dfu-programmer.exe atmega32u4 flash &quot;D:\Git\qmk_firmware\gh60_satan_default.hex&quot;
    Checking memory from 0x0 to 0x3F7F...  Empty.
    0%                            100%  Programming 0x3F80 bytes...
    [&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success
    0%                            100%  Reading 0x7000 bytes...
    [&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success
    Validating...  Success
    0x3F80 bytes written into 0x7000 bytes memory (56.70%).
&gt;&gt;&gt; dfu-programmer.exe atmega32u4 reset
    
*** DFU device disconnected: Atmel Corp: ATmega32U4 (03EB:2FF4:0000)
</code></pre>
<h2 id="flash-your-keyboard-from-the-command-line" tabindex="-1">Flash your Keyboard from the Command Line</h2>
<p>This has been made pretty simple compared to what it used to be. When you are ready to compile and flash your firmware, open up your terminal window and run the flash command:</p>
<pre><code>qmk flash
</code></pre>
<p>If you did not configure your keyboard/keymap name in the CLI according to the <a href="newbs_getting_started.md">Configure your build environment</a> section, or you have multiple keyboards, you can specify the keyboard and keymap:</p>
<pre><code>qmk flash -kb &lt;my_keyboard&gt; -km &lt;my_keymap&gt;
</code></pre>
<p>This will check the keyboard's configuration, and then attempt to flash it based on the specified bootloader. This means that you don't need to know which bootloader that your keyboard uses. Just run the command, and let the command do the heavy lifting.</p>
<p>However, this does rely on the bootloader being set by the keyboard. If this information is not configured, or you're using a board that doesn't have a supported target to flash it, you will see this error:</p>
<pre><code>WARNING: This board's bootloader is not specified or is not supported by the &quot;:flash&quot; target at this time.
</code></pre>
<p>In this case, you'll have to fall back on specifying the bootloader. See the <a href="flashing.md">Flashing Firmware</a> Guide for more details.</p>
<h2 id="test-it-out!" tabindex="-1">Test It Out!</h2>
<p>Congrats! Your custom firmware has been programmed to your keyboard and you're ready to test it out!</p>
<p>With a little bit of luck everything will work perfectly, but if not there are steps that will help you figure out what's wrong.
Testing your keyboard is usually pretty straightforward. Press every single key and make sure it sends the keys you expect. You can use <a href="https://config.qmk.fm/#/test/">QMK Configurator</a>'s test mode to check your keyboard, even if it doesn't run QMK.</p>
<p>Still not working? Browse the FAQ topics for more information, or <a href="https://discord.gg/Uq7gcHh">chat with us on Discord</a>.</p>
</article>
        </div>
      </main>
    </body>
  </html>